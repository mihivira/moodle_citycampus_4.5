{"version":3,"file":"graphics_courses.min.js","sources":["../src/graphics_courses.js"],"sourcesContent":["define(['jquery', 'core/chartjs'], function($, Chart) {\n\n    /**\n     * Graphics Dashboard class\n     */\n    function GraphicsDashboard(containerId, title, chartType, data, colSize, id) {\n        this.containerId = containerId;\n        this.title = title;\n        this.chartType = chartType;\n        this.data = data;\n        this.colSize = colSize;\n        this.id = id;\n        this.chartInstance = null;\n    }\n\n    /**\n     * Print card with course information\n     */\n    GraphicsDashboard.prototype.printCardCourseInfo = function() {\n        var html = '<div class=\"col-md-' + this.colSize + ' mb-4\">' +\n                  '<div class=\"card shadow\">' +\n                  '<div class=\"card-header py-3\">' +\n                  '<h6 class=\"m-0 font-weight-bold text-primary\"><a href=\"detalle_curso.php?courseid=' + this.id + '\">' + this.title + '</a></h6>' +\n                  '</div>' +\n                  '<div class=\"card-body\">' +\n                  '<div class=\"row\">' +\n                  '<div class=\"col-md-8\">' +\n                  '<canvas id=\"chart-' + this.id + '\" width=\"400\" height=\"200\"></canvas>' +\n                  '</div>' +\n                  '<div class=\"col-md-4\">' +\n                  '<div class=\"stats-container\">' +\n                  '<h6>Estad√≠sticas</h6>' +\n                  '<p>Inscritos: <span id=\"inscritos' + this.id + '\">'+ (this.data.enrolled_users || 0) +'</span></p>' +\n                  '<p>Aprobados: <span id=\"aprobados' + this.id + '\">'+ (this.data.approved_percentage || 0) +'</span></p>' +\n                  '<p>No Aprobados: <span id=\"no_aprobados' + this.id + '\">'+ (this.data.not_approved_percentage || 0) +'</span></p>' +\n                  '</div>' +\n                  '</div>' +\n                  '</div>' +\n                  '</div>' +\n                  '</div>' +\n                  '</div>';\n                  \n        $('#' + this.containerId).append(html);\n    };\n\n    /**\n     * Print card without information\n     */\n    GraphicsDashboard.prototype.printCardSinInfo = function() {\n        var html = '<div class=\"col-md-' + this.colSize + ' mb-4\">' +\n                  '<div class=\"card shadow\">' +\n                  '<div class=\"card-header py-3\">' +\n                  '<h6 class=\"m-0 font-weight-bold text-primary\">' + this.title + '</h6>' +\n                  '</div>' +\n                  '<div class=\"card-body\">' +\n                  '<p class=\"text-center text-muted\">No hay datos disponibles para este curso</p>' +\n                  '</div>' +\n                  '</div>' +\n                  '</div>';\n                  \n        $('#' + this.containerId).append(html);\n    };\n\n    /**\n     * Comparative graph\n     */\n    GraphicsDashboard.prototype.comparative_graph = function() {\n        var canvasId = 'chart-' + this.id;\n        var ctx = document.getElementById(canvasId);\n        if(!ctx) {\n            console.error('Canvas element not found: ' + canvasId);\n            return;\n        }\n\n        // Destruir instancia anterior si existe\n        if(this.chartInstance) {\n            this.chartInstance.destroy();\n            this.chartInstance = null;\n        }\n\n        try {\n            var chartData = {\n                labels: ['Aprobados', 'No Aprobados'],\n                datasets: [{\n                    label: 'Porcentaje',\n                    data: [this.data.percentage || 0, \n                           Math.max(0, 100 - (this.data.percentage || 0))],\n                    backgroundColor: [\n                        '#1cc88a',\n                        '#e74a3b'\n                    ],\n                    borderColor: [\n                        '#1cc88a',\n                        '#e74a3b'\n                    ],\n                    borderWidth: 1\n                }]\n            };\n\n            var chartConfig = {\n                type: this.chartType === 'horizontalBar' ? 'bar' : 'bar',\n                data: chartData,\n                options: {\n                    indexAxis: this.chartType === 'horizontalBar' ? 'y' : 'x',\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    scales: {\n                        x: {\n                            beginAtZero: true,\n                            max: 100\n                        },\n                        y: {\n                            beginAtZero: true,\n                            max: 100\n                        }\n                    }\n                }\n            };\n\n            this.chartInstance = new Chart(ctx, chartConfig);\n            console.log('Chart created successfully for ID: ' + this.id);\n        } catch(e) {\n            console.error('Error creating chart for ID: ' + this.id, e);\n        }\n    };\n\n    /**\n     * Individual graph (pie chart)\n     */\n    GraphicsDashboard.prototype.individual_graph = function() {\n        var canvasId = 'chart-' + this.id;\n        var ctx = document.getElementById(canvasId);\n        if(!ctx) {\n            console.error('Canvas element not found: ' + canvasId);\n            return;\n        }\n\n        // Destruir instancia anterior si existe\n        if(this.chartInstance) {\n            this.chartInstance.destroy();\n            this.chartInstance = null;\n        }\n\n        try {\n            var chartData = {\n                labels: ['Aprobados', 'No Aprobados'],\n                datasets: [{\n                    data: [Math.max(0, this.data.percentage || 0), \n                           Math.max(0, 100 - (this.data.percentage || 0))],\n                    backgroundColor: [\n                        '#1cc88a',\n                        '#e74a3b'\n                    ],\n                    borderColor: [\n                        '#ffffff'\n                    ],\n                    borderWidth: 2\n                }]\n            };\n\n            var chartConfig = {\n                type: this.chartType === 'pie' ? 'pie' : 'doughnut',\n                data: chartData,\n                options: {\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins: {\n                        legend: {\n                            position: 'bottom'\n                        }\n                    }\n                }\n            };\n\n            this.chartInstance = new Chart(ctx, chartConfig);\n            console.log('Pie chart created successfully for ID: ' + this.id);\n        } catch(e) {\n            console.error('Error creating pie chart for ID: ' + this.id, e);\n        }\n    };\n\n    return GraphicsDashboard;\n});"],"names":["define","$","Chart","GraphicsDashboard","containerId","title","chartType","data","colSize","id","chartInstance","prototype","printCardCourseInfo","html","this","enrolled_users","approved_percentage","not_approved_percentage","append","printCardSinInfo","comparative_graph","canvasId","ctx","document","getElementById","destroy","chartData","labels","datasets","label","percentage","Math","max","backgroundColor","borderColor","borderWidth","chartConfig","type","options","indexAxis","responsive","maintainAspectRatio","scales","x","beginAtZero","y","console","log","e","error","individual_graph","plugins","legend","position"],"mappings":"AAAAA,uDAAO,CAAC,SAAU,iBAAiB,SAASC,EAAGC,gBAKlCC,kBAAkBC,YAAaC,MAAOC,UAAWC,KAAMC,QAASC,SAChEL,YAAcA,iBACdC,MAAQA,WACRC,UAAYA,eACZC,KAAOA,UACPC,QAAUA,aACVC,GAAKA,QACLC,cAAgB,YAMzBP,kBAAkBQ,UAAUC,oBAAsB,eAC1CC,KAAO,sBAAwBC,KAAKN,QAA7B,mJAGsFM,KAAKL,GAAK,KAAOK,KAAKT,MAH5G,kGAQsBS,KAAKL,GAR3B,sJAaqCK,KAAKL,GAAK,MAAOK,KAAKP,KAAKQ,gBAAkB,GAblF,+CAcqCD,KAAKL,GAAK,MAAOK,KAAKP,KAAKS,qBAAuB,GAdvF,qDAe2CF,KAAKL,GAAK,MAAOK,KAAKP,KAAKU,yBAA2B,GAfjG,kDAuBXhB,EAAE,IAAMa,KAAKV,aAAac,OAAOL,OAMrCV,kBAAkBQ,UAAUQ,iBAAmB,eACvCN,KAAO,sBAAwBC,KAAKN,QAA7B,+GAGkDM,KAAKT,MAHvD,qIAWXJ,EAAE,IAAMa,KAAKV,aAAac,OAAOL,OAMrCV,kBAAkBQ,UAAUS,kBAAoB,eACxCC,SAAW,SAAWP,KAAKL,GAC3Ba,IAAMC,SAASC,eAAeH,aAC9BC,KAMDR,KAAKJ,qBACCA,cAAce,eACdf,cAAgB,cAIjBgB,UAAY,CACZC,OAAQ,CAAC,YAAa,gBACtBC,SAAU,CAAC,CACPC,MAAO,aACPtB,KAAM,CAACO,KAAKP,KAAKuB,YAAc,EACxBC,KAAKC,IAAI,EAAG,KAAOlB,KAAKP,KAAKuB,YAAc,KAClDG,gBAAiB,CACb,UACA,WAEJC,YAAa,CACT,UACA,WAEJC,YAAa,KAIjBC,YAAc,CACdC,MAAMvB,KAAKR,UAAgC,OAC3CC,KAAMmB,UACNY,QAAS,CACLC,UAA8B,kBAAnBzB,KAAKR,UAAgC,IAAM,IACtDkC,YAAY,EACZC,qBAAqB,EACrBC,OAAQ,CACJC,EAAG,CACCC,aAAa,EACbZ,IAAK,KAETa,EAAG,CACCD,aAAa,EACbZ,IAAK,aAMhBtB,cAAgB,IAAIR,MAAMoB,IAAKc,aACpCU,QAAQC,IAAI,sCAAwCjC,KAAKL,IAC3D,MAAMuC,GACJF,QAAQG,MAAM,gCAAkCnC,KAAKL,GAAIuC,SApDzDF,QAAQG,MAAM,6BAA+B5B,WA2DrDlB,kBAAkBQ,UAAUuC,iBAAmB,eACvC7B,SAAW,SAAWP,KAAKL,GAC3Ba,IAAMC,SAASC,eAAeH,aAC9BC,KAMDR,KAAKJ,qBACCA,cAAce,eACdf,cAAgB,cAIjBgB,UAAY,CACZC,OAAQ,CAAC,YAAa,gBACtBC,SAAU,CAAC,CACPrB,KAAM,CAACwB,KAAKC,IAAI,EAAGlB,KAAKP,KAAKuB,YAAc,GACpCC,KAAKC,IAAI,EAAG,KAAOlB,KAAKP,KAAKuB,YAAc,KAClDG,gBAAiB,CACb,UACA,WAEJC,YAAa,CACT,WAEJC,YAAa,KAIjBC,YAAc,CACdC,KAAyB,QAAnBvB,KAAKR,UAAsB,MAAQ,WACzCC,KAAMmB,UACNY,QAAS,CACLE,YAAY,EACZC,qBAAqB,EACrBU,QAAS,CACLC,OAAQ,CACJC,SAAU,kBAMrB3C,cAAgB,IAAIR,MAAMoB,IAAKc,aACpCU,QAAQC,IAAI,0CAA4CjC,KAAKL,IAC/D,MAAMuC,GACJF,QAAQG,MAAM,oCAAsCnC,KAAKL,GAAIuC,SA5C7DF,QAAQG,MAAM,6BAA+B5B,WAgD9ClB"}